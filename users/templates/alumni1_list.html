{% extends "base/base.html" %}
{% load static %}

{% block title %}Our Alumni{% endblock %}

{% block content %}
<div class="container py-5">
    <!-- Swiping Cards Section -->
    <h2 class="text-center fw-bold mb-4 text-primary">Featured Alumni</h2>

    <div id="alumniCarousel" class="carousel slide mb-5" data-bs-ride="carousel">
        <div class="carousel-inner">
            {% for alum in alumni %}
            <div class="carousel-item {% if forloop.first %}active{% endif %}">
                <div class="d-flex justify-content-center">
                    <div class="card text-center p-4 shadow border-0" style="width: 22rem; border-radius: 20px;">
                        {% if alum.profile_pic %}
                        <img src="{{ alum.profile_pic.url }}" class="rounded-circle mx-auto alumni-img mb-3" alt="{{ alum.name }}">
                        {% else %}
                        <img src="{% static 'images/default-user.png' %}" class="rounded-circle mx-auto alumni-img mb-3" alt="Default">
                        {% endif %}
                        <div class="card-body">
                            <h5 class="card-title fw-bold">{{ alum.name }}</h5>
                            <p class="text-muted">{{ alum.position }} at {{ alum.current_company }}</p>
                            {% if alum.linkedin_url %}
                            <a href="{{ alum.linkedin_url }}" target="_blank" class="btn btn-outline-primary btn-sm mt-2">LinkedIn</a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

        <button class="carousel-control-prev" type="button" data-bs-target="#alumniCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon bg-dark rounded-circle" aria-hidden="true"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#alumniCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon bg-dark rounded-circle" aria-hidden="true"></span>
        </button>
    </div>

    <!-- All Alumni Grid Section -->
    <h3 class="text-center fw-bold mb-4 text-secondary">All Our Alumni</h3>
    <div class="row g-4">
        {% for alum in alumni %}
        <div class="col-lg-4 col-md-6 col-sm-12">
            <div class="card text-center shadow p-3 border-0 h-100">
                {% if alum.profile_pic %}
                <img src="{{ alum.profile_pic.url }}" class="rounded-circle mx-auto alumni-img mb-3" alt="{{ alum.name }}">
                {% else %}
                <img src="{% static 'images/default-user.png' %}" class="rounded-circle mx-auto alumni-img mb-3" alt="Default">
                {% endif %}
                <div class="card-body">
                    <h5 class="card-title fw-bold">{{ alum.name }}</h5>
                    <p class="text-muted">{{ alum.position }} at {{ alum.current_company }}</p>
                    {% if alum.linkedin_url %}
                    <a href="{{ alum.linkedin_url }}" target="_blank" class="btn btn-outline-secondary btn-sm">LinkedIn</a>
                    {% endif %}
                </div>
            </div>
        </div>
        {% empty %}
        <p class="text-center text-muted">No alumni profiles available at the moment.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
    .alumni-img {
        width: 160px;
        height: 160px;
        object-fit: cover;
        border: 5px solid #fff;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease;
    }

    .card:hover .alumni-img {
        transform: scale(1.05);
    }

    .carousel-control-prev-icon,
    .carousel-control-next-icon {
        width: 40px;
        height: 40px;
    }

    h2, h3 {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
</style>
{% endblock %}

{% block extra_js %}
<script>
    const alumniCarousel = document.querySelector('#alumniCarousel');
    if (alumniCarousel) {
        new bootstrap.Carousel(alumniCarousel, {
            interval: 4000,
            ride: 'carousel',
            wrap: true // makes it loop!
        });
    }
</script>
{% endblock %}
